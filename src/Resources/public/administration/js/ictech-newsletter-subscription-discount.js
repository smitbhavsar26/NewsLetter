!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/bundles/ICTECHNewsletterSubscriptionDiscount/",t(t.s="9xOT")}({"9xOT":function(e,n,t){"use strict";t.r(n);var o=Shopware,r=o.Component,i=o.Mixin,l=o.Defaults,a=Shopware.Data.Criteria;r.register("newsletter-promotion-configuration",{template:'{% block newsletter_prmotion_configuration %}\n    <sw-page class="newsletter-promotion-configuration">\n        {% block newsletter_prmotion_configuration_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon name="small-arrow-medium-right" small></sw-icon>\n                    {{ $tc(\'newsletter-promotion.header\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block newsletter_prmotion_configuration_content %}\n            <template #content>\n                {% block newsletter_prmotion_configuration_content_card %}\n                    <sw-card-view>\n                        {% block newsletter_prmotion_configuration_content_card_channel_config %}\n                            <sw-sales-channel-config\n                                v-model="config"\n                                ref="configComponent"\n                                domain="newsletter.settings"\n                            >\n                                {% block newsletter_prmotion_configuration_content_card_channel_config_sales_channel %}\n                                    <template #select="{ onInput, selectedSalesChannelId }">\n                                        <sw-card :title="$tc(\'global.entities.sales_channel\', 2)">\n                                            {% block biller_configuration_content_card_channel_config_sales_channel_card_title %}\n                                                <sw-single-select v-model="selectedSalesChannelId"\n                                                                  labelProperty="translated.name"\n                                                                  valueProperty="id"\n                                                                  :isLoading="isLoading"\n                                                                  :options="salesChannels"\n                                                                  :disabled="!acl.can(\'newsletter.editor\')"\n                                                                  @change="onInput">\n                                                </sw-single-select>\n                                            {% endblock %}\n                                        </sw-card>\n                                    </template>\n                                {% endblock %}\n\n                                {% block newsletter_prmotion_configuration_content_card_channel_config_cards %}\n                                <template #content="{ actualConfigData, allConfigs, selectedSalesChannelId }">\n                                    <div v-if="actualConfigData">\n                                        <sw-card :title="$tc(\'newsletter-promotion.promotion.config\')">\n                                            <sw-container>\n                                                <div class="text-field">\n                                                    <sw-inherit-wrapper v-model="actualConfigData[\'newsletter.settings.promotionTitle\']"\n                                                                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'newsletter.settings.promotionTitle\']"\n                                                                        :customInheritationCheckFunction="checkTextFieldInheritance">\n                                                        <template #content="props">\n                                                            <sw-text-field name="newsletter.settings.promotionTitle"\n                                                                           :mapInheritance="props"\n                                                                           :label="$tc(\'newsletter-promotion.promotion.promotionTitle\')"\n                                                                           :disabled="props.isInherited || !acl.can(\'newsletter.editor\')"\n                                                                           :value="props.currentValue"\n                                                                           @change="props.updateCurrentValue">\n                                                            </sw-text-field>\n                                                        </template>\n                                                    </sw-inherit-wrapper>\n                                                </div>\n\n                                                <div class="textarea-field">\n                                                    <sw-inherit-wrapper v-model="actualConfigData[\'newsletter.settings.description\']"\n                                                                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'newsletter.settings.description\']"\n                                                                        :customInheritationCheckFunction="checkTextFieldInheritance">\n                                                        <template #content="props">\n                                                            <sw-textarea-field name="newsletter.settings.description"\n                                                                           :mapInheritance="props"\n                                                                           :label="$tc(\'newsletter-promotion.promotion.description\')"\n                                                                           :disabled="props.isInherited || !acl.can(\'newsletter.editor\')"\n                                                                           :value="props.currentValue"\n                                                                           @change="props.updateCurrentValue">\n                                                            </sw-textarea-field>\n                                                        </template>\n                                                    </sw-inherit-wrapper>\n                                                </div>\n\n                                                <div class="text-field">\n                                                    <sw-inherit-wrapper v-model="actualConfigData[\'newsletter.settings.promoCode\']"\n                                                                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'newsletter.settings.promoCode\']"\n                                                                        :customInheritationCheckFunction="checkTextFieldInheritance">\n                                                        <template #content="props">\n                                                            <sw-single-select name="newsletter.settings.promoCode"\n                                                                              :options="promoCodeOptions"\n                                                                              :label="$tc(\'newsletter-promotion.promotion.promoCode\')"\n                                                                              labelProperty="name"\n                                                                              valueProperty="id"\n                                                                              :isInherited="props.isInherited"\n                                                                              :value="props.currentValue"\n                                                                              @change="props.updateCurrentValue"\n                                                                              :disabled="props.isInherited || !acl.can(\'newsletter.editor\')">\n                                                            </sw-single-select>\n                                                        </template>\n                                                    </sw-inherit-wrapper>\n                                                </div>\n                                            </sw-container>\n                                        </sw-card>\n                                    </div>\n                                </template>\n                                {% endblock %}\n                            </sw-sales-channel-config>\n                        {% endblock %}\n                    </sw-card-view>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n',inject:["repositoryFactory","configService","acl"],mixins:[i.getByName("notification")],data:function(){return{isLoading:!1,isSaveSuccessful:!1,config:null,salesChannels:[],promoCodeOptions:[]}},computed:{salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")}},created:function(){this.createdComponent(),this.getPromotionProperties()},methods:{createdComponent:function(){var e=this;this.isLoading=!0;var n=new a;n.addFilter(a.equalsAny("typeId",[l.storefrontSalesChannelTypeId,l.apiSalesChannelTypeId])),this.salesChannelRepository.search(n,Shopware.Context.api).then((function(n){n.add({id:null,translated:{name:e.$tc("sw-sales-channel-switch.labelDefaultOption")}}),e.salesChannels=n})).finally((function(){e.isLoading=!1}))},checkTextFieldInheritance:function(e){return"string"!=typeof e||e.length<=0},checkBoolFieldInheritance:function(e){return"boolean"!=typeof e},getPromotionProperties:function(){var e=this,n=new a;n.addFilter(n.equals("validFrom  ",null)),n.addFilter(n.equals("validUntil",null)),n.addFilter(n.equals("maxRedemptionsPerCustomer",1)),n.addFilter(n.equals("exclusive",0)),n.addFilter(n.equals("preventCombination",1)),n.addFilter(a.not("or",[n.equals("code",null)])),n.addFilter(a.not("or",[n.equals("salesChannels.salesChannelId",null)])),n.addFilter(a.not("and",[n.equals("personaPromotions.promotionId",null),n.equals("orderPromotions.promotionId",null),n.equals("cartPromotions.promotionId",null)])),this.promotionRepository.search(n,Shopware.Context.api).then((function(n){return n.forEach((function(n){e.promoCodeOptions.push(n)})),e.promoCodeOptions}))}}});var s=t("saFw"),c=t("b4Cl");Shopware.Module.register("newsletter-promotion",{type:"plugin",name:"newsletter-promotion.general.mainMenuItemGeneral",title:"newsletter-promotion.general.mainMenuItemGeneral",description:"newsletter-promotion.general.descriptionTextModule",color:"#9AA8B5",icon:"default-communication-inbox",favicon:"icon-module-settings.png",snippets:{"de-DE":s,"en-GB":c},routes:{index:{component:"newsletter-promotion-configuration",path:"index",meta:{parentPath:"sw.settings.index"}}},settingsItem:{name:"newsletter-promotion",to:"newsletter.promotion.index",label:"newsletter-promotion.general.mainMenuItemGeneral",group:"plugins",icon:"default-communication-inbox"}})},b4Cl:function(e){e.exports=JSON.parse('{"newsletter-promotion":{"header":"NewsLetter Promotion","general":{"mainMenuItemGeneral":"NewsLetter Promotion","descriptionTextModule":"Manage NewsLetter Promotion configuration here"},"promotion":{"config":"Promotion","promotionTitle":"Promotion Title","description":"Promotion Description","promoCode":"Promotion Promocode"}}}')},saFw:function(e){e.exports=JSON.parse('{"newsletter-promotion":{"header":"Newsletter-Promotion","general":{"mainMenuItemGeneral":"Newsletter-Promotion","descriptionTextModule":"Verwalten Sie hier die Konfiguration der Newsletter-Aktion"},"promotion":{"config":"Promotion","promotionTitle":"Promotion Title"}}}')}});
