!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/bundles/ictechnewslettersubscriptiondiscount/",t(t.s="T88Z")}({"/0Ja":function(e,n,t){var o=t("Wvjk");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t("SZ7m").default)("391a6300",o,!0,{})},SZ7m:function(e,n,t){"use strict";function o(e,n){for(var t=[],o={},i=0;i<n.length;i++){var r=n[i],a=r[0],s={id:e+":"+i,css:r[1],media:r[2],sourceMap:r[3]};o[a]?o[a].parts.push(s):t.push(o[a]={id:a,parts:[s]})}return t}t.r(n),t.d(n,"default",(function(){return f}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,d=function(){},p=null,u="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,n,t,i){c=t,p=i||{};var a=o(e,n);return h(a),function(n){for(var t=[],i=0;i<a.length;i++){var s=a[i];(l=r[s.id]).refs--,t.push(l)}n?h(a=o(e,n)):a=[];for(i=0;i<t.length;i++){var l;if(0===(l=t[i]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete r[l.id]}}}}function h(e){for(var n=0;n<e.length;n++){var t=e[n],o=r[t.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](t.parts[i]);for(;i<t.parts.length;i++)o.parts.push(w(t.parts[i]));o.parts.length>t.parts.length&&(o.parts.length=t.parts.length)}else{var a=[];for(i=0;i<t.parts.length;i++)a.push(w(t.parts[i]));r[t.id]={id:t.id,refs:1,parts:a}}}}function g(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function w(e){var n,t,o=document.querySelector("style["+u+'~="'+e.id+'"]');if(o){if(c)return d;o.parentNode.removeChild(o)}if(m){var i=l++;o=s||(s=g()),n=S.bind(null,o,i,!1),t=S.bind(null,o,i,!0)}else o=g(),n=C.bind(null,o),t=function(){o.parentNode.removeChild(o)};return n(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;n(e=o)}else t()}}var v,b=(v=[],function(e,n){return v[e]=n,v.filter(Boolean).join("\n")});function S(e,n,t,o){var i=t?"":o.css;if(e.styleSheet)e.styleSheet.cssText=b(n,i);else{var r=document.createTextNode(i),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(r,a[n]):e.appendChild(r)}}function C(e,n){var t=n.css,o=n.media,i=n.sourceMap;if(o&&e.setAttribute("media",o),p.ssrId&&e.setAttribute(u,n.id),i&&(t+="\n/*# sourceURL="+i.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},T88Z:function(e,n,t){"use strict";t.r(n);var o=Shopware,i=o.Component,r=o.Mixin,a=o.Defaults,s=Shopware.Data.Criteria;i.register("newsletter-promotion-configuration",{template:'{% block newsletter_prmotion_configuration %}\n    <sw-page class="newsletter-promotion-configuration">\n        {% block newsletter_prmotion_configuration_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon name="small-arrow-medium-right" small></sw-icon>\n                    {{ $tc(\'newsletter-promotion.header\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block newsletter_prmotion_configuration_actions %}\n            <template #smart-bar-actions>\n                {% block newsletter_prmotion_configuration_actions_save %}\n                    <sw-button-process v-model="isSaveSuccessful"\n                                       class="sw-settings-login-registration__save-action"\n                                       variant="primary"\n                                       :isLoading="isLoading"\n                                       :disabled="isLoading || !acl.can(\'newsletter.editor\')"\n                                       @click="onSave">\n                        {{ $tc(\'global.default.save\') }}\n                    </sw-button-process>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block newsletter_prmotion_configuration_content %}\n            <template #content>\n                {% block newsletter_prmotion_configuration_content_card %}\n                    <sw-card-view>\n                        {% block newsletter_prmotion_configuration_content_card_channel_config %}\n                            <sw-sales-channel-config\n                                v-model="config"\n                                ref="configComponent"\n                                domain="newsletter.settings"\n                            >\n                                {% block newsletter_prmotion_configuration_content_card_channel_config_sales_channel %}\n                                    <template #select="{ onInput, selectedSalesChannelId }">\n                                        <sw-card :title="$tc(\'global.entities.sales_channel\', 2)">\n                                            {% block biller_configuration_content_card_channel_config_sales_channel_card_title %}\n                                                <sw-single-select v-model="selectedSalesChannelId"\n                                                                  labelProperty="translated.name"\n                                                                  valueProperty="id"\n                                                                  :isLoading="isLoading"\n                                                                  :options="salesChannels"\n                                                                  :disabled="!acl.can(\'newsletter.editor\')"\n                                                                  @change="onInput">\n                                                </sw-single-select>\n                                            {% endblock %}\n                                        </sw-card>\n                                    </template>\n                                {% endblock %}\n\n                                {% block newsletter_prmotion_configuration_content_card_channel_config_cards %}\n                                <template #content="{ actualConfigData, allConfigs, selectedSalesChannelId }">\n                                    <div v-if="actualConfigData">\n                                        <sw-card :title="$tc(\'newsletter-promotion.general.generalConfig\')">\n                                            <sw-container>\n\n                                                <div class="switch-field">\n                                                    <sw-inherit-wrapper v-model="actualConfigData[\'newsletter.settings.activeSwitch\']"\n                                                                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'newsletter.settings.activeSwitch\']"\n                                                                        :customInheritationCheckFunction="checkBoolFieldInheritance">\n                                                        <template #content="props">\n                                                            <sw-switch-field name="newsletter.settings.activeSwitch"\n                                                                             :mapInheritance="props"\n                                                                             :label="$tc(\'newsletter-promotion.general.activeSwitch\')"\n                                                                             :disabled="props.isInherited || !acl.can(\'newsletter.editor\')"\n                                                                             :value="props.currentValue"\n                                                                             @change="props.updateCurrentValue">\n                                                            </sw-switch-field>\n                                                        </template>\n                                                    </sw-inherit-wrapper>\n                                                </div>\n\n                                                <div class="text-field">\n                                                    <sw-inherit-wrapper v-model="actualConfigData[\'newsletter.settings.promotionTitle\']"\n                                                                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'newsletter.settings.promotionTitle\']"\n                                                                        :customInheritationCheckFunction="checkTextFieldInheritance">\n                                                        <template #content="props">\n                                                            <sw-text-field name="newsletter.settings.promotionTitle"\n                                                                           :mapInheritance="props"\n                                                                           :label="$tc(\'newsletter-promotion.promotion.promotionTitle\')"\n                                                                           :helpText="$tc(\'newsletter-promotion.promotion.titleHint\')"\n                                                                           :disabled="props.isInherited || !acl.can(\'newsletter.editor\')"\n                                                                           :value="props.currentValue"\n                                                                           @change="props.updateCurrentValue">\n                                                            </sw-text-field>\n                                                        </template>\n                                                    </sw-inherit-wrapper>\n                                                </div>\n\n                                                <div class="textarea-field">\n                                                    <sw-inherit-wrapper v-model="actualConfigData[\'newsletter.settings.description\']"\n                                                                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'newsletter.settings.description\']"\n                                                                        :customInheritationCheckFunction="checkTextFieldInheritance">\n                                                        <template #content="props">\n                                                            <sw-textarea-field name="newsletter.settings.description"\n                                                                           :mapInheritance="props"\n                                                                           :label="$tc(\'newsletter-promotion.promotion.description\')"\n                                                                           :helpText="$tc(\'newsletter-promotion.promotion.descriptionHint\')"\n                                                                           :disabled="props.isInherited || !acl.can(\'newsletter.editor\')"\n                                                                           :value="props.currentValue"\n                                                                           @change="props.updateCurrentValue">\n                                                            </sw-textarea-field>\n                                                        </template>\n                                                    </sw-inherit-wrapper>\n                                                </div>\n\n                                                <div class="text-field">\n                                                    <sw-inherit-wrapper v-model="actualConfigData[\'newsletter.settings.promoCode\']"\n                                                                        :inheritedValue="selectedSalesChannelId === null ? null : allConfigs[\'null\'][\'newsletter.settings.promoCode\']"\n                                                                        :customInheritationCheckFunction="checkTextFieldInheritance">\n                                                        <template #content="props">\n                                                            <sw-single-select name="newsletter.settings.promoCode"\n                                                                              :options="promoCodeOptions"\n                                                                              :label="$tc(\'newsletter-promotion.promotion.promoCode\')"\n                                                                              labelProperty="name"\n                                                                              valueProperty="id"\n                                                                              :isInherited="props.isInherited"\n                                                                              :value="props.currentValue"\n                                                                              @change="props.updateCurrentValue"\n                                                                              :disabled="props.isInherited || !acl.can(\'newsletter.editor\')">\n                                                            </sw-single-select>\n                                                        </template>\n                                                    </sw-inherit-wrapper>\n                                                </div>\n                                            </sw-container>\n                                        </sw-card>\n                                    </div>\n                                </template>\n                                {% endblock %}\n                            </sw-sales-channel-config>\n                        {% endblock %}\n                    </sw-card-view>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n',inject:["repositoryFactory","configService","acl"],mixins:[r.getByName("notification")],data:function(){return{isLoading:!1,isSaveSuccessful:!1,config:null,salesChannels:[],promoCodeOptions:[]}},computed:{salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},promotionRepository:function(){return this.repositoryFactory.create("promotion")}},created:function(){this.createdComponent(),this.getPromotionProperties()},methods:{createdComponent:function(){var e=this;this.isLoading=!0;var n=new s;n.addFilter(s.equalsAny("typeId",[a.storefrontSalesChannelTypeId,a.apiSalesChannelTypeId])),this.salesChannelRepository.search(n,Shopware.Context.api).then((function(n){n.add({id:null,translated:{name:e.$tc("sw-sales-channel-switch.labelDefaultOption")}}),e.salesChannels=n})).finally((function(){e.isLoading=!1}))},onSave:function(){var e=this;this.isLoading=!0,this.$refs.configComponent.save().then((function(){e.isSaveSuccessful=!0,e.createNotificationSuccess({title:e.$tc("newsletter-promotion.action.titleSaveSuccess"),message:e.$tc("newsletter-promotion.action.messageSaveSuccess")})})).finally((function(){e.isLoading=!1}))},checkTextFieldInheritance:function(e){return"string"!=typeof e||e.length<=0},checkBoolFieldInheritance:function(e){return"boolean"!=typeof e},getPromotionProperties:function(){var e=this,n=new s;n.addAssociation("personaRules"),n.addFilter(s.equals("validFrom",null)),n.addFilter(s.equals("validUntil",null)),n.addFilter(s.equals("maxRedemptionsPerCustomer",1)),n.addFilter(s.equals("exclusive",!1)),n.addFilter(s.equals("preventCombination",!0)),n.addFilter(s.not("and",[s.equals("code",null)])),n.addFilter(s.not("and",[s.equals("salesChannels.salesChannelId",null)])),n.addFilter(s.equals("personaRules.id",null)),n.addFilter(s.equals("orderRules.id",null)),n.addFilter(s.equals("useSetGroups",!1)),n.addFilter(s.equals("cartRules.id",null)),n.addFilter(s.equals("discounts.scope","cart")),n.addFilter(s.equals("discounts.considerAdvancedRules",!1)),n.addFilter(s.not("and",[s.equals("discounts.type","fixed_unit")])),this.promotionRepository.search(n,Shopware.Context.api).then((function(n){return n.forEach((function(n){e.promoCodeOptions.push(n)})),e.promoCodeOptions}))}}});t("/0Ja");Shopware.Component.register("newsletter-configuration-disocunt-icon",{template:'{% block newsletter_configuration_icon %}\n    <img class="newsletter-icon__gif" alt="newsletter_icon"\n         src="\'/ictechnewslettersubscriptiondiscount/static/image/plugin.png\' | asset">\n{% endblock %}\n'});var l=t("wp61"),c=t("altR"),d=t("dnDy");Shopware.Module.register("newsletter-promotion",{type:"plugin",name:"newsletter-promotion.general.mainMenuItemGeneral",title:"newsletter-promotion.general.mainMenuItemGeneral",description:"newsletter-promotion.general.descriptionTextModule",color:"#9AA8B5",icon:"default-communication-inbox",favicon:"icon-module-settings.png",snippets:{"de-DE":l,"en-GB":c,"nl-NL":d},routes:{index:{component:"newsletter-promotion-configuration",path:"index",meta:{parentPath:"sw.settings.index"}}},settingsItem:{name:"newsletter-promotion",to:"newsletter.promotion.index",label:"newsletter-promotion.general.mainMenuItemGeneral",group:"plugins",icon:"default-communication-inbox"}})},Wvjk:function(e,n,t){},altR:function(e){e.exports=JSON.parse('{"newsletter-promotion":{"header":"NewsLetter Promotion","general":{"generalConfig":"General Config","activeSwitch":"Activate Plugin","mainMenuItemGeneral":"NewsLetter Promotion","descriptionTextModule":"Manage NewsLetter Promotion configuration here"},"action":{"buttonSaveText":"Save","titleSaveSuccess":"Success","messageSaveSuccess":"Details saved successfully"},"promotion":{"promotionTitle":"Newsletter pop-up title","titleHint":"Use <a href=\'https://prnt.sc/1AbIOwfOCndP\'>\\"%discount%\\"</a>  to display the promotion value.","description":"Newsletter pop-up description","descriptionHint":"Use <a href=\'https://prnt.sc/1AbIOwfOCndP\'>\\"%discount%\\"</a> to display the promotion value.","promoCode":"Select Promotion for Newsletter Subscription on Cart/Checkout page"}}}')},dnDy:function(e){e.exports=JSON.parse('{"newsletter-promotion":{"header":"nieuwsbrief-promotie","general":{"generalConfig":"Algemene Configuratie","activeSwitch":"Activeer Plugin","mainMenuItemGeneral":"Nieuwsbrief Promotie","descriptionTextModule":"Beheer hier de configuratie van NewsLetter Promotion"},"action":{"buttonSaveText":"Sla","titleSaveSuccess":"Succes","messageSaveSuccess":"Details succesvol opgeslage"},"promotion":{"promotionTitle":"Nieuwsbrief pop-up titel","titleHint":"Gebruik \\"%discount%\\" om de promotiewaarde weer te geven.","description":"Nieuwsbrief pop-up beschrijving","descriptionHint":"Gebruik \\"%discount%\\" oom de promotiewaarde weer te geven.","promoCode":"Selecteer Promotie voor nieuwsbriefabonnement op winkelwagen/afrekenpagina"}}}')},wp61:function(e){e.exports=JSON.parse('{"newsletter-promotion":{"header":"Newsletter-Promotion","general":{"generalConfig":"Allgemeine Konfig","mainMenuItemGeneral":"Newsletter-Aktion","activeSwitch":"Plugin aktivieren","descriptionTextModule":"Verwalten Sie hier die Konfiguration der Newsletter-Aktion"},"action":{"buttonSaveText":"Speichern","titleSaveSuccess":"Erfolgreich","messageSaveSuccess":"Details erfolgreich gespeichert"},"promotion":{"promotionTitle":"Newsletter-Popup-Titel","titleHint":"Benutzer \\"%discount%\\" um den Aktionswert anzuzeigen.","description":"Newsletter-Popup-Beschreibung","descriptionHint":"Benutzer \\"%discount%\\" um den Aktionswert anzuzeigen.","promoCode":"Wählen Sie Aktion für das Newsletter-Abonnement auf der Warenkorb-/Kasse-Seite"}}}')}});